$(document).on('pageinit', '#home', function(){
	$.couch.db("asdproject").view("asdproject/course", {
		success: function(data){
			//console.log(data);
			$('#savedlist').empty();
			$.each(data.rows, function(index, value){
				var item = (value.value || value.doc);
				$('#savedlist').append(
					$('<li>').append(
						$('<a>')
							.attr("href", "course.html?course=" + item.class)
							.text(item.datedue)
					)
				);
			});
			$('#savedlist').listview('refresh');
		}
	});
});

$(document).on('pageinit', '#view', function(){
	var urlData = $(this).data("url");
	//console.log(urlData);
	var urlParts = urlData.split('?');
	//foo?a=1&b=2&c=3
	var urlPairs = urlParts[1].split('&');
	var urlValues = {};
	for (var pair in urlPairs){
		var keyValue = urlPairs[pair].split('=');
		var key = decodeURIComponent(keyValue[0]);
		var value = decodeURIComponent(keyValue[1]);
		urlValues[key] = value;
	}
	console.log(urlValues);
});